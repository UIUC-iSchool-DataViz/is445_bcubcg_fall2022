<!doctype html>
<html>
  <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Lecture 6 - Dashboards & Maps</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/reset.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/reveal.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/theme/white.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/5.11.2/css/font-awesome.min.css">

<!-- Theme used for syntax highlighting of code -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<link href="https://fonts.googleapis.com/css?family=Questrial" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/dist/reveal.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/markdown/markdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/highlight/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/notes/notes.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js@4.0.2/plugin/math/math.js"></script>



</style>

  <link rel="stylesheet/less" type="text/css" href="/is445_bcubcg_fall2022/assets/styles.less" />
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
          <section class="titleslide">
              <h1>Lecture 6 - Dashboards & Maps</h1>
              <h2>Jill Naiman</h2>
              <h2>Data Visualization - Fall 2022</h2>
          </section>
        <section data-markdown
           data-separator="^\n---\n"
           data-separator-vertical="^\n----\n">
          <script type="text/template">
## Announcement: 

Short *anonymous* feedback survey.

notes:
*unhide the survey!*

---

## Where we are: Last week

<img src="images/dataviz_map_lastweek_take2.png">

notes: last week  we started playing with dashboarding using some randomly generated data in bqplot

we also started working with the Grammer of Graphics and used bqplot declaritively to start "painting" scales and axis on our canvas

we also talked about different viz engines and you got to look at this in the HW

---

## Where we are: Today

<img src="images/dataviz_map_thisweek.png">

notes: Today we'll continue building up dashboards

if we have time we'll also start talking about map projections this week (but we might only get to it next week)

---

## Today's Main Topics

 1. Interactivity and linked views
 1. More dashboarding
 1. Dashboards with maps
 1. Map projections (if we have time)

---

<br>
<br>
<br>

# TOPIC 1: Interactivity


---

## Interactivity

This week, we'll talk about some more basics principles of interactivity in
visualization.

What do you think of when you think of interactive visualizations?

---

## Interactivity: Parameters

<!-- .slide: data-background-image="images/brushlink_01.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

 * Point characteristics
 * Axis limits/bounds
 * Transform/scale

note: we'll think a little about different ways to manipulate each of these types of plot characteristics

---

## Interactivity: Parameters

<!-- .slide: data-background-image="images/brushlink_01.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

 * Point characteristics - Click-and-drag
 * Axis limits/bounds - Rectangle zoom
 * Transform/scale - Adjustment

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_02.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

`data(variable1, variable2, variable3, variable4)`

note: here we are plotting a set of data that is a function of 4 variables.

For example, this could be the amount you are late to class as a function of (1) how much sleep you got, (2) how excited you are about the topic that day (3) how nervous you are about the topic that day and (4) how much of your homework the dog ate.

here we are plotting 2 2d plots of this dataset - were we know intuatively each point is represented both as a dot on the first graph *and* as a dot on the 2nd graph

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_02.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

`data(variable1, variable2, variable3, variable4)`

`filter( variable2 > variable1 )`

note: now we are going to think about applying a simple filter, based around the first plot

we'll only show data where variable2 > variable1

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_03.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

`data(variable1, variable2, variable3, variable4)`

`filter( variable2 > variable1 )`

note: lets draw a line where the demarkation of our filter would be

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_04.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

`data(variable1, variable2, variable3, variable4)`

`filter( variable2 > variable1 )`

note: ... and lets take out all the data of both plots that has variable2 <= variable1

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_05.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

note: we can also select regions in our linked view

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_06.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

note: here are how these points are linked in the plot of variable3 vs variable4

---

## Interactivity: Linking & Brushing

<!-- .slide: data-background-image="images/brushlink_07.svg" data-background-size="80% auto" data-background-position="right 50% bottom 50%" -->

note: so when we select with our brush in the first plot we can show what is selected in the second plot

---

## Interactivity: Linking & Brushing with UFO data

![](/is445_bcubcg_fall2022/week06/images/durationAllPoints.png)

note: as a "practical" example, we can for example make cuts in things like the
duration of UFO sitings for all years

---

## Interactivity: Linking & Brushing with UFO data

![](/is445_bcubcg_fall2022/week06/images/durationAllPoints_p2.png)

note: we can select only the longest sitings

---

## Interactivity: Linking & Brushing with UFO data

![](/is445_bcubcg_fall2022/week06/images/durationLongPoints.png)

note: this is how this plot would now look

---

## Interactivity: Linking & Brushing with UFO data

![](/is445_bcubcg_fall2022/week06/images/mapAllPoints.png)

note: and then we can see how the map changes

this is our original

---

## Interactivity: Linking & Brushing with UFO data

![](/is445_bcubcg_fall2022/week06/images/mapLongPoints.png)

note: this is how this dataset looks now w/o the shortest duration ufo sitings

---

## Interactivity: Linking & Brushing with UFO data

As a dashboard:

<!-- .slide: class="two-floating-elements" -->

<div class="left">
  <img src="images/durationAllPoints.png">
</div>

<div class="right">
 <img src="images/mapAllPoints.png">
</div>

notes:
as a dashboard, this process would look something like this where we have the duration in seconds on the left "driving" changes in the lat/long points shown on the right


---

## Interactivity: Linking & Brushing with UFO data

As a dashboard:

<!-- .slide: class="two-floating-elements" -->

<div class="left">
  <img src="images/durationAllPoints_p2.png">
</div>

<div class="right">
 <img src="images/mapAllPoints.png">
</div>

notes:

our user would then select a threshold they wanted to cull the data by

---

## Interactivity: Linking & Brushing with UFO data

As a dashboard:

<!-- .slide: class="two-floating-elements" -->

<div class="left">
  <img src="images/durationAllPoints_p2.png">
</div>

<div class="right">
 <img src="images/mapLongPoints.png">
</div>

notes:

and those changes would propagete to our right-hand plot through a data "linkage", thus allowing our user to have multiple views of this dataset

---

<iframe width="1024" height="576"
src="https://www.youtube.com/embed/B7XoW2qiFUA?rel=0" frameborder="0"
allow="autoplay; encrypted-media" allowfullscreen></iframe>

[Link to video](https://www.youtube.com/embed/B7XoW2qiFUA)

note: here is one of the first examples of a "linked view" visualization machine.  We won't watch this whole video, but
if you are interested, they talk about how they can "interact" with different views

this was developed by SLAC (stanford linear accelerator)

prim9 = picturing, rotation, isolation & masking in up to 9 dimensions - for looking at multidimensional datasets
this was developed for particle data (so, like x,y,z and vx,vy,vz might be of interest)

*pause recording here!*

---

## Implementing This

Two main approaches to the selection process:

 * Concurrent filtering ("masks")
 * Index-based selection (i, j - based)

What are the pros and cons of each?

What are methods of showing "linked" and "brushed" data if you have:

 * Scatter plot
 * Histogram
 * Field / image plot

notes: 
hint -- we already discussed index based last class with the grid heatmap and the histogram plots

and we've done masking before with the filtering of images

---

<br>
<br>
<br>

# TOPIC 2: Dashboarding

---

## Recall: HW 6 this week

Build a dashboard for the buildings data.
 * Left component:
   * Grid heat map
   * Columns are County
   * Rows are the governmental department (Agency Name) 
   * Values are mean of total square footage for that set of criteria
 * Right component:
   * is a barplot/histogram
   * x is the year
   * y is total square footage acquired that year
 * These two should be linked so that you can select cells and that will update the square footage plot.
	
notes:
Hint for those in class -- check out pivot tables with pandas, it might get you close to where you want to be with filtering your data!

---

## Today's Python Programming:

Starting with these ideas, we'll progressively enhance.

 * Create heat maps of the sightings in the UFO dataset
 * Select based on location (do not use map marks yet)
 * Manually create "bins" for aggregation (**this is "pre-done" for us**)
 * Use different scales for dates, times, locations

We'll use these to build up a _dashboard_ for our data.

notes:
in the prep notebook, it is shown how the histogramming is done, however for timing purposes we'll just use a function

---

## Dashboards: Tableau
![](/is445_bcubcg_fall2022/week06/images/Tableau-Sample-Training-Dashboard-Original.png)

notes: so here is an example of a dashboard, I *think* from Tableau.  Here we see a linked view which
displays data in several different ways to give the user the ability to visualize what their data
means spatially (with the map & region bargraph) and temporally (with the calendar/bar view at the bottom)

---

## Dashboards: Glueviz
![](/is445_bcubcg_fall2022/week06/images/histogram.png)

note: aside, there are opensource dashboarding type software, this is an example of glueviz that is
used a lot in astronomy and built on python

This is an example of binning light (dark or bright pixels) in an image of a star forming region (I think),
and linking this with a histogram which responds to a selection tool (in red) in the image.

---

## Dashboards: Building our own in Python

Why bother?

notes: so, given that there is dashboarding software out there, why would be bother going through the difficulty of doing it ourselves?

---

## Dashboards: Building our own in Python

Why bother?
 * Understand choices about data formatting/missing data

notes: the first reason is that we can learn a bit about what choices we make for "messy" data

---

## Dashboards: Building our own in Python

Why bother?
 * Understand choices about data formatting/missing data
 * Understand necessary data transformations

notes: next, we can learn a bit about how data is transformed to make it dash-boardable

---

## Dashboards: Building our own in Python

Why bother?
 * Understand choices about data formatting/missing data
 * Understand necessary data transformations
 * Understand data links

notes: also we want to understand the ways we can actually link parts of our data together -- what choices do we make to link data like this?

if we use dashboarding software, it can often obfuscate a lot of of these aspects

---

## Dashboards: Building our own in Python

# TOPIC 3: To Python for an intro to map dashboards!

notes: today we will get more experience building up these sorts of interfaces ourselves!

          </script>
        </section>
      </div>
    </div>
<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        fragments: true,
        fragmentInURL: true,
        hash: true,
        width: 1024,
        height: 768,
        margin: 0.02,
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath],
        dependencies: [
            { src: 'https://cdn.jsdelivr.net/npm/reveald3/reveald3.js'}
        ],
		keyboard: {
		},
        center: false,
        transition: 'none',
        backgroundTransition: 'none',
        reveald3: {
            runLastState: false
        }
    });
</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js" ></script>


  </body>
</html>

